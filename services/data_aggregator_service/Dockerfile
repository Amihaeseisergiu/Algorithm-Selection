FROM python:3.10

WORKDIR /app
COPY . .

RUN pip3 install -r requirements.txt

ENV FLASK_RUN_HOST=0.0.0.0
ENV FLASK_RUN_PORT=5000

ENV RABBITMQ_USER=user
ENV RABBITMQ_PASS=pass

ENV MONGODB_USERNAME=user
ENV MONGODB_PASSWORD=pass
ENV MONGODB_HOSTNAME=mongodb

ENV DATA_AGGREGATOR_TOPIC=data_aggregator
ENV ALGORITHMS_DATA_QUEUE=algorithms_data
ENV ALGORITHMS_DATA_KEY=algorithms.data
ENV INSTANCE_FEATURES_QUEUE=instance_features
ENV INSTANCE_FEATURES_KEY=instance.features

CMD python3 /app/src/service.py